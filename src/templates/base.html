<!DOCTYPE html>
<html>
    <head>
        <title>{{channel}}</title>
        {% block includes %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/jquery-2.0.3.min.js') }}"></script>
        {% endblock %}
        <link href="http://fonts.googleapis.com/css?family=Titillium+Web:400,700,200" rel="stylesheet" type="text/css">
        <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/favicon.png') }}" />
        <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
        <script type="text/javascript">
            String.prototype.hashCode = function(){
                var hash = 0;
                if (this.length == 0) return hash;
                for (i = 0; i < this.length; i++) {
                    char = this.charCodeAt(i);
                    hash = ((hash<<5)-hash)+char;
                    hash = hash & hash; // Convert to 32bit integer
                }
                return hash;
            }
        </script>
    </head>
    <body>
        <nav class="nav">
            <ul class="left">
                <li><span><a href="{{ url_for('merveilles.root') }}">{{channel}}</a></span></li>
                <li><span id="meta_info">DB Size: {{ size|file_size }},  Render Time: {{ g.request_time() }}, Links Saved:  </span><a class="link" style="font-size: 12px;" href="{{ url_for('merveilles.stats') }}">{{ count }}</a></li>
            </ul>
            <ul class="right">
                <li>
                    <a href="{{ url_for('merveilles.blog') }}">Blog</a>
                </li>
                <li>
                    <a href="{{ url_for('merveilles.viz') }}">Data, Statistics and Visualizations</a>
                </li>
                <li>
                    <a href="//github.com/qpfiffer/merveilles_io">Code</a>
                </li>
                <li>
                    <input id="search_box" type="text" placeholder="search" />
                    <input id="search_button" type="button" value="Go" />
                </li>
            </ul>
        </nav>
        {% block content %}
        {% endblock %}
        {% include "page_junk.html" %}
        {% if live_site %}
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-30510579-3', 'merveill.es');
  ga('send', 'pageview');

</script>
        {% endif %}
        <script type="text/javascript">
            $(function() {
            {% block startup %}
                last_height = 0;
                function search() {
                    var term = $("#search_box").val();
                    window.location = "{{ url_for('merveilles.interrogate', qstring="") }}" + term;
                }
                $("#search_button").click(search);
                $("#search_box").keypress(function(e) {
                    if (e.keyCode == 13) {
                        search();
                    }
                });
                $(".the_animal").each(function(iter, val) {
                    // Let's generate some faces
                    var username = $(val).attr("class").replace("the_animal ", "");
                    var canvas = val.appendChild(document.createElement('canvas'));
                    canvas.width = canvas.height = 32;
                    var con = canvas.getContext('2d');
                    console.log("Username: ", username);
                    drawHexFace(con, username.hashCode(), 'rgb(255,255,255)', 'rgb(68,68,68)');
                });
            {% endblock %}
            });
        </script>
    </body>
</html>
