<!DOCTYPE html>
<html>
    <head>
        <title>{{channel}}</title>
        {% block includes %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/jquery-2.0.3.min.js') }}"></script>
        {% endblock %}
        <link href="http://fonts.googleapis.com/css?family=Titillium+Web:400,700,200" rel="stylesheet" type="text/css">
        <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/favicon.png') }}" />
        <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
        <script type="text/javascript">
            String.prototype.hashCode = function(){
                var hash = 0;
                if (this.length == 0) return hash;
                for (i = 0; i < this.length; i++) {
                    char = this.charCodeAt(i);
                    hash = ((hash<<5)-hash)+char;
                    hash = hash & hash; // Convert to 32bit integer
                }
                return hash;
            }
        </script>
        <script type="text/javascript">var _jf = _jf || [];_jf.push(['_setAppId','06a561d8XQUUEwfhqMjr0S8zdTYLxu7kwC6pbOQEXzqZo25xfvNDSDetijMtvIwWprv8CDbhVc0ROSHCujBHggS0UyRpjkxXRu9orGcrJoMvk9j4ny3uxi08mOIATWQqpToWhVeRoDmNttaLikOyLq4SNBe9knh4ZFYR4udDND-q6WtOWjs=']);_jf.push(['p','26936']);_jf.push(['_setFont','wt014','css','.wt014']);_jf.push(['_setFont','wt014','css','.title_header']);_jf.push(['_setFont','wt014','alias','wt014']);(function(f,q,c,h,e,i,r,d){var k=f._jf;if(k.constructor===Object){return}var l,t=q.getElementsByTagName("html")[0],a=function(u){for(var v in k){if(k[v][0]==u){if(false===k[v][1].call(k)){break}}}},j=/\S+/g,o=/[\t\r\n\f]/g,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g="".trim,s=g&&!g.call("\uFEFF\xA0")?function(u){return u==null?"":g.call(u)}:function(u){return u==null?"":(u+"").replace(b,"")},m=function(y){var w,z,v,u,x=typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):" ";if(z){u=0;while((v=w[u++])){if(z.indexOf(" "+v+" ")<0){z+=v+" "}}t[c]=s(z)}}},p=function(y){var w,z,v,u,x=arguments.length===0||typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):"";if(z){u=0;while((v=w[u++])){while(z.indexOf(" "+v+" ")>=0){z=z.replace(" "+v+" "," ")}}t[c]=y?s(z):""}}},n;k.push(["_eventActived",function(){p(h);m(e)}]);k.push(["_eventInactived",function(){p(h);m(i)}]);k.addScript=n=function(u,A,w,C,E,B){E=E||function(){};B=B||function(){};var x=q.createElement("script"),z=q.getElementsByTagName("script")[0],v,y=false,D=function(){x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;a("_eventInactived");B()};if(C){v=setTimeout(function(){D()},C)}x.type=A||"text/javascript";x.async=w;x.onload=x.onreadystatechange=function(G,F){if(!y&&(!x.readyState||/loaded|complete/.test(x.readyState))){y=true;if(C){clearTimeout(v)}x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;if(!F){setTimeout(function(){E()},200)}}};x.onerror=function(H,G,F){if(C){clearTimeout(v)}D();return true};x.src=u;z.parentNode.insertBefore(x,z)};a("_eventPreload");m(h);n(r,"text/javascript",false,3000)})(this,this.document,"className","jf-loading","jf-active","jf-inactive","//ds.justfont.com/js/stable/v/2.7/id/112420316393");</script>
    </head>
    <body>
        <nav class="nav">
            <ul class="left">
                <li><span><a class="Title_header" href="{{ url_for('merveilles.root') }}">奇蹟</a></span></li>
                <li><span id="meta_info">DB Size: {{ size|file_size }},  Render Time: {{ g.request_time() }}, Links Saved:  </span><a class="link" style="font-size: 12px;" href="{{ url_for('merveilles.stats') }}">{{ count }}</a></li>
            </ul>
            <ul class="right">
                <li>
                    <a href="{{ url_for('merveilles.blog') }}">Blog</a>
                </li>
                <li>
                    <a href="{{ url_for('merveilles.viz') }}">Data, Statistics and Visualizations</a>
                </li>
                <li>
                    <a href="//github.com/qpfiffer/merveilles_io">Code</a>
                </li>
                <li>
                    <input id="search_box" type="text" placeholder="search" />
                    <input id="search_button" type="button" value="Go" />
                </li>
            </ul>
        </nav>
        {% block content %}
        {% endblock %}
        {% include "page_junk.html" %}
        {% if live_site %}
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-30510579-3', 'merveill.es');
  ga('send', 'pageview');

</script>
        {% endif %}
        <script type="text/javascript">
            $(function() {
            {% block startup %}
                last_height = 0;
                function search() {
                    var term = $("#search_box").val();
                    window.location = "{{ url_for('merveilles.interrogate', qstring="") }}" + term;
                }
                $("#search_button").click(search);
                $("#search_box").keypress(function(e) {
                    if (e.keyCode == 13) {
                        search();
                    }
                });
                $(".the_animal").each(function(iter, val) {
                    // Let's generate some faces
                    var username = $(val).attr("class").replace("the_animal ", "");
                    var canvas = val.appendChild(document.createElement('canvas'));
                    canvas.width = canvas.height = 32;
                    var con = canvas.getContext('2d');
                    drawHexFace(con, username.hashCode(), 'rgb(255,255,255)', 'rgb(68,68,68)');
                });
            {% endblock %}
            });
        </script>
    </body>
</html>
